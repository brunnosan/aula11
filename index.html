<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Aula 11</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
    <link rel="stylesheet" href="css/index.css">
    <link rel="stylesheet" href="css/back.css">
    <link rel="stylesheet" href="css/megaman.css">
</head>
<body>
    <div id="instructions">
        <h2>Instruções</h2>
        <p>
            Reiniciar: Esc<br>
            Direções: <br>
            <button id="up"><i class="fa-solid fa-up-long"></i></button><br>
            <button id="left"><i class="fa-solid fa-left-long"></i></button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<button id="right"><i class="fa-solid fa-right-long"></i></button><br>
            <button id="down"><i class="fa-solid fa-down-long"></i></button><br>
        </p>
    </div>
    <div id="back" class="start"></div>
    <div id="mega" class="start"></div>
</body>
<script>
    evento = 'stopRight';
    addEventListener('DOMContentLoaded', (l) => {
        setTimeout(() => {
            mega.classList.remove(mega.className);
            back.classList.remove(back.className);
            mega.classList.add(evento);
            back.classList.add(evento);
        }, 1000);
        return;
    });

    document.querySelector("#up").addEventListener("click", () => { 
        document.dispatchEvent(new KeyboardEvent("keyup", { key: "ArrowUp" }));
        return;
    });

    document.querySelector("#right").addEventListener("click", () => { 
        document.dispatchEvent(new KeyboardEvent("keyup", { key: "ArrowRight" }));
        return;
    });

    document.querySelector("#left").addEventListener("click", () => { 
        document.dispatchEvent(new KeyboardEvent("keyup", { key: "ArrowLeft" }));
        return;
    });

    document.querySelector("#down").addEventListener("click", () => { 
        document.dispatchEvent(new KeyboardEvent("keyup", { key: "ArrowDown" }));
        return;
    });

    document.addEventListener('keyup', (e) => {
        if(e.key === 'Escape') {
            mega.classList.remove(mega.className);
            back.classList.remove(back.className);
            evento='start';
            mega.classList.add(evento);
            back.classList.add(evento);
            return;
        }
        if((e.key === 'ArrowRight') && (e.shiftKey === false)) {
            if ((mega.className==='jumpRight') || (mega.className==='jumpLeft')) {
                return;
            }
            mega.classList.remove(mega.className);
            back.classList.remove(back.className);
            evento='runRight';
            mega.classList.add(evento);
            back.classList.add(evento);
            return;
        }
        if((e.key === 'ArrowRight') && (e.shiftKey === true)) {
            if ((mega.className==='jumpRight') || (mega.className==='jumpLeft')) {
                return;
            }
            evento='runRight';
            eventoDash='dashRight';
            mega.classList.remove(mega.className);
            back.classList.remove(back.className);
            mega.classList.add(eventoDash);
            back.classList.add(evento);
            setTimeout(() => {
                mega.classList.remove(eventoDash);
                mega.classList.add(evento);
            }, 500);
            return;
        }
        if((e.key === 'ArrowLeft') && (e.shiftKey === false)) {
            if ((mega.className==='jumpRight') || (mega.className==='jumpLeft')) {
                return;
            }
            mega.classList.remove(mega.className);
            back.classList.remove(back.className);
            evento='runLeft';
            mega.classList.add(evento);
            back.classList.add(evento);
            return;
        }
        if((e.key === 'ArrowLeft') && (e.shiftKey === true)) {
            if ((mega.className==='jumpRight') || (mega.className==='jumpLeft')) {
                return;
            }
            evento='runLeft';
            eventoDash='dashLeft';
            mega.classList.remove(mega.className);
            back.classList.remove(back.className);
            mega.classList.add(eventoDash);
            back.classList.add(evento);
            setTimeout(() => {
                mega.classList.remove(eventoDash);
                mega.classList.add(evento);
            }, 500);
            return;
        }
        if(e.key === 'ArrowUp') {
            if ((mega.className==='jumpRight') || (mega.className==='jumpLeft') || (mega.className==='dashRight') || (mega.className==='dashLeft')) {
                return;
            }
            evento=mega.className;
            eventoJump='';
            mega.classList.remove(mega.className);
            switch (evento) {
                case 'runRight':
                case 'stopRight':
                    eventoJump='jumpRight';
                    break;
            
                case 'runLeft':
                case 'stopLeft':
                    eventoJump='jumpLeft';
                    break;
            
                default:
                    eventoJump='jumpRight';
                    break;
            }
            mega.classList.add(eventoJump);
            setTimeout(() => {
                mega.classList.remove(eventoJump);
                mega.classList.add(evento);
            }, 1000);
            return;
        }
        if(e.key === 'ArrowDown') {
            if ((mega.className==='jumpRight') || (mega.className==='jumpLeft')) {
                return;
            }
            evento=mega.className;
            mega.classList.remove(mega.className);
            back.classList.remove(back.className);
            switch (evento) {
                case 'runRight':
                case 'stopRight':
                    evento='stopRight';
                    break;
            
                case 'runLeft':
                case 'stopLeft':
                    evento='stopLeft';
                    break;
            
                default:
                    evento='stopRight';
                    break;
            }
            mega.classList.add(evento);
            back.classList.add(evento);
            return;
        }
    })
</script>
</html>